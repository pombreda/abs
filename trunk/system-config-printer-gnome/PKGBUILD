# $Id: PKGBUILD,v 1.20 2008/12/29 15:30:49 BaSh Exp $
# Maintainer: Andrea Scarpino <bash.lnx@gmail.com>

pkgname=system-config-printer-gnome
pkgver=1.1.1
pkgrel=1
pkgdesc="Pygtk CUPS Configuration"
url="http://cyberelk.net/tim/software/system-config-printer/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('system-config-printer' 'python-notify' 'gnome-python')
makedepends=('xmlto' 'docbook-xsl' 'perlxml' 'desktop-file-utils')
source=(http://cyberelk.net/tim/data/system-config-printer/1.1/system-config-printer-$pkgver.tar.bz2)
md5sums=('95ad721f3d274557144ddcf5e458a9e4')

build() {
  cd "$srcdir/system-config-printer-$pkgver"

  sed -i 's/at_console="true"/group="sys"/' newprinternotification.conf || return 1

  ./configure --prefix=/usr \
    --sbindir=/usr/bin \
    --sysconfdir=/etc
  make || return 1
  make DESTDIR="$pkgdir" install

  # remove system-config-printer conflicts
  rm -rf ${pkgdir}/usr/lib/python2.6/site-packages/cupshelpers || return 1
  rm -r ${pkgdir}/usr/share/system-config-printer/{config,debug,smburi}.py || return 1
}
